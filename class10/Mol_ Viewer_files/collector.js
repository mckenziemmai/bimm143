"use strict";(()=>{var Y=Object.defineProperty;var G=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var C=(e,r,t)=>r in e?Y(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,d=(e,r)=>{for(var t in r||(r={}))z.call(r,t)&&C(e,t,r[t]);if(G)for(var t of G(r))Z.call(r,t)&&C(e,t,r[t]);return e};var u=(e,r,t)=>new Promise((a,i)=>{var n=l=>{try{E(t.next(l))}catch(p){i(p)}},o=l=>{try{E(t.throw(l))}catch(p){i(p)}},E=l=>l.done?a(l.value):Promise.resolve(l.value).then(n,o);E((t=t.apply(e,r)).next())});function g(e){return u(this,null,function*(){return new Promise(r=>setTimeout(r,e))})}function W(e){return JSON.stringify(e,Object.getOwnPropertyNames(e),2)}function f(e){return Math.max(-2147483648,Math.min(2147483647,e))}var $=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_disjoint_timer_query","EXT_frag_depth","EXT_shader_texture_lod","EXT_sRGB","OES_element_index_uint","OES_fbo_render_mipmap","OES_standard_derivatives","OES_texture_float","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_depth_texture","WEBGL_draw_buffers"],N=["EXT_color_buffer_half_float","EXT_float_blend","EXT_texture_compression_bptc","EXT_texture_compression_rgtc","EXT_texture_filter_anisotropic","KHR_parallel_shader_compile","OES_texture_float_linear","WEBGL_compressed_texture_astc","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_lose_context","WEBGL_multi_draw","EXT_clip_control","EXT_depth_clamp","WEBGL_polygon_mode","EXT_texture_mirror_clamp_to_edge"],J=["EXT_color_buffer_float","EXT_disjoint_timer_query_webgl2","EXT_texture_norm16","OES_draw_buffers_indexed","OVR_multiview2","EXT_polygon_offset_clamp","WEBGL_blend_equation_advanced_coherent","WEBGL_clip_cull_distance","WEBGL_draw_instanced_base_vertex_base_instance","WEBGL_multi_draw_instanced_base_vertex_base_instance","WEBGL_provoking_vertex","WEBGL_shader_pixel_local_storage","EXT_conservative_depth","NV_shader_noperspective_interpolation","OES_sample_variables","OES_shader_multisample_interpolation","EXT_render_snorm","WEBGL_render_shared_exponent","WEBGL_stencil_texturing","EXT_blend_func_extended"];var Q=[...N,...$].sort((e,r)=>e.localeCompare(r));function P(){return Q}var ee=[...N,...J].sort((e,r)=>e.localeCompare(r));function I(){return ee}function x(e){return[...new Set(e).values()]}var X=["MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_CUBE_MAP_TEXTURE_SIZE","MAX_FRAGMENT_UNIFORM_VECTORS","MAX_RENDERBUFFER_SIZE","MAX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_VARYING_VECTORS","MAX_VERTEX_ATTRIBS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_UNIFORM_VECTORS","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_VIEWPORT_WIDTH","MAX_VIEWPORT_HEIGHT","MAX_DUAL_SOURCE_DRAW_BUFFERS_EXT"],re=["MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL"],te=["MAX_3D_TEXTURE_SIZE","MAX_ARRAY_TEXTURE_LAYERS","MAX_CLIENT_WAIT_TIMEOUT_WEBGL","MAX_COLOR_ATTACHMENTS","MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS","MAX_COMBINED_UNIFORM_BLOCKS","MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS","MAX_DRAW_BUFFERS","MAX_ELEMENT_INDEX","MAX_ELEMENTS_INDICES","MAX_ELEMENTS_VERTICES","MAX_FRAGMENT_INPUT_COMPONENTS","MAX_FRAGMENT_UNIFORM_BLOCKS","MAX_FRAGMENT_UNIFORM_COMPONENTS","MAX_PROGRAM_TEXEL_OFFSET","MAX_SAMPLES","MAX_SERVER_WAIT_TIMEOUT","MAX_TEXTURE_LOD_BIAS","MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS","MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS","MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS","MAX_UNIFORM_BLOCK_SIZE","MAX_UNIFORM_BUFFER_BINDINGS","MAX_VARYING_COMPONENTS","MAX_VERTEX_OUTPUT_COMPONENTS","MAX_VERTEX_UNIFORM_BLOCKS","MAX_VERTEX_UNIFORM_COMPONENTS","MIN_PROGRAM_TEXEL_OFFSET","MIN_FRAGMENT_INTERPOLATION_OFFSET_OES","MAX_FRAGMENT_INTERPOLATION_OFFSET_OES","FRAGMENT_INTERPOLATION_OFFSET_BITS_OES","MAX_PIXEL_LOCAL_STORAGE_PLANES_WEBGL","MAX_COLOR_ATTACHMENTS_WITH_ACTIVE_PIXEL_LOCAL_STORAGE_WEBGL","MAX_COMBINED_DRAW_BUFFERS_AND_PIXEL_LOCAL_STORAGE_PLANES_WEBGL","MAX_VIEWS_OVR","MAX_CLIP_DISTANCES_WEBGL","MAX_CULL_DISTANCES_WEBGL","MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL"],T={EXT_texture_filter_anisotropic:["MAX_TEXTURE_MAX_ANISOTROPY_EXT"],WEBGL_draw_buffers:["MAX_DRAW_BUFFERS_WEBGL","MAX_COLOR_ATTACHMENTS_WEBGL"],OVR_multiview2:["MAX_VIEWS_OVR"],WEBGL_clip_cull_distance:["MAX_CLIP_DISTANCES_WEBGL","MAX_CULL_DISTANCES_WEBGL","MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL"],WEBGL_shader_pixel_local_storage:["MAX_PIXEL_LOCAL_STORAGE_PLANES_WEBGL","MAX_COLOR_ATTACHMENTS_WITH_ACTIVE_PIXEL_LOCAL_STORAGE_WEBGL","MAX_COMBINED_DRAW_BUFFERS_AND_PIXEL_LOCAL_STORAGE_PLANES_WEBGL"],OES_shader_multisample_interpolation:["MIN_FRAGMENT_INTERPOLATION_OFFSET_OES","MAX_FRAGMENT_INTERPOLATION_OFFSET_OES","FRAGMENT_INTERPOLATION_OFFSET_BITS_OES"],EXT_blend_func_extended:["MAX_DUAL_SOURCE_DRAW_BUFFERS_EXT"]};function w(){return x([...X,...re]).sort((e,r)=>e.localeCompare(r))}function B(){return x([...te,...X]).sort((e,r)=>e.localeCompare(r))}var h=["VERTEX_SHADER","FRAGMENT_SHADER"],v=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT"],y=["LOW_INT","MEDIUM_INT","HIGH_INT"];var F=["bgra8unorm-storage","chromium-experimental-dp4a","chromium-experimental-read-write-storage-texture","depth-clamping","depth-clip-control","depth24unorm-stencil8","depth32float-stencil8","float32-filterable","indirect-first-instance","multi-planar-formats","pipeline-statistics-query","rg11b10ufloat-renderable","shader-f16","texture-compression-bc","texture-compression-etc2","texture-compression-astc","timestamp-query","timestamp-query-inside-passes"].sort((e,r)=>e.localeCompare(r));var D=["maxTextureDimension1D","maxTextureDimension2D","maxTextureDimension3D","maxTextureArrayLayers","maxBindGroups","maxBindGroupsPlusVertexBuffers","maxBindingsPerBindGroup","maxDynamicUniformBuffersPerPipelineLayout","maxDynamicStorageBuffersPerPipelineLayout","maxSampledTexturesPerShaderStage","maxSamplersPerShaderStage","maxStorageBuffersPerShaderStage","maxStorageTexturesPerShaderStage","maxUniformBuffersPerShaderStage","maxFragmentCombinedOutputResources","maxUniformBufferBindingSize","maxStorageBufferBindingSize","minUniformBufferOffsetAlignment","minStorageBufferOffsetAlignment","maxVertexBuffers","maxBufferSize","maxVertexAttributes","maxVertexBufferArrayStride","maxInterStageShaderComponents","maxInterStageShaderVariables","maxColorAttachments","maxColorAttachmentBytesPerSample","maxComputeWorkgroupStorageSize","maxComputeInvocationsPerWorkgroup","maxComputeWorkgroupSizeX","maxComputeWorkgroupSizeY","maxComputeWorkgroupSizeZ","maxComputeWorkgroupsPerDimension"].sort((e,r)=>e.localeCompare(r));var U;(function(e){e[e.WebGL=0]="WebGL",e[e.WebGL2=1]="WebGL2",e[e.WebGPU=2]="WebGPU",e[e.WebXR=3]="WebXR"})(U||(U={}));function A(e,r){let t=e.getContext(r,{failIfMajorPerformanceCaveat:!0});if(t!==null)return{gl:t,majorPerformanceCaveat:!1};let a=e.getContext(r);return{gl:a,majorPerformanceCaveat:a!==null?!0:null}}function S(e){return"OffscreenCanvas"in window?new OffscreenCanvas(1,1).getContext(e)!==null:!1}function L(e){let r=e;if("unpackColorSpace"in r&&"drawingBufferColorSpace"in r){let i=function(n,o){r[n]=o,a[n][o]=r[n]===o};var t=i;let a={unpackColorSpace:{srgb:!1,"display-p3":!1},drawingBufferColorSpace:{srgb:!1,"display-p3":!1}};return i("unpackColorSpace","srgb"),i("unpackColorSpace","display-p3"),i("drawingBufferColorSpace","srgb"),i("drawingBufferColorSpace","display-p3"),a}return null}function b(e){let r=e.getExtension("WEBGL_debug_renderer_info");return r===null?null:{vendor:e.getParameter(r.UNMASKED_VENDOR_WEBGL),renderer:e.getParameter(r.UNMASKED_RENDERER_WEBGL)}}function M(e,r){let t={};for(let a of r)t[a]=e.getExtension(a)!==null;return t}function O(e,r){let t=e,a={};for(let n of r){if(!(n in e))continue;let o=e.getParameter(t[n]);if(typeof o=="number")a[n]=e.getParameter(t[n]);else throw new Error(`Unhandled WebGL parameter: ${n} of type ${typeof o}`)}let i=e.getParameter(e.MAX_VIEWPORT_DIMS);a.MAX_VIEWPORT_WIDTH=i[0],a.MAX_VIEWPORT_HEIGHT=i[1];for(let n in T){let o=e.getExtension(n);if(o!==null){let E=T[n];for(let l of E)a[l]=f(e.getParameter(o[l]))}}return a}function R(e){let r=e,t={};for(let a of h){let i={};for(let n of v){let o=e.getShaderPrecisionFormat(r[a],r[n]);o!==null&&(i[n]={precision:o.precision,rangeMin:o.rangeMin,rangeMax:o.rangeMax})}for(let n of y){let o=e.getShaderPrecisionFormat(r[a],r[n]);o!==null&&(i[n]={rangeMin:o.rangeMax,rangeMax:o.rangeMin})}t[a]=i}return t}function V(){return typeof navigator!="undefined"&&"gpu"in navigator?navigator.gpu:null}function H(e){return u(this,null,function*(){return"requestAdapter"in e?yield e.requestAdapter():null})}function k(e,r){let t=r.reduce((i,n)=>{var o;return i[n]=((o=e.features)==null?void 0:o.has(n))||!1,i},{}),a=e.features?[...e.features].filter(i=>r.indexOf(i)<0):[];return a.length>0&&(t.other=a.join(",")),t}function j(e,r){var n;let t=e.limits,a=r.reduce((o,E)=>(E in t&&(o[E]=f(t[E])),o),{}),i=Object.keys(((n=e.limits)==null?void 0:n.constructor.prototype)||{}).filter(o=>r.indexOf(o)<0);return i.length>0&&(a.other=i.join(",")),a}function K(e){return u(this,null,function*(){if(!("requestAdapterInfo"in e))return{};let r=yield e.requestAdapterInfo();return{vendor:r.vendor,device:r.device,architecture:r.architecture,description:r.description}})}(function(){let r={host:"https://web3dsurvey.com",samplePercentage:100,delay:2e3};function t(){return typeof web3DSurveyConfig=="object"?d(d({},r),web3DSurveyConfig):r}function a(s){return{collectionError:W(s)}}function i(s,_){try{return s()}catch(c){return _}}function n(s){return u(this,null,function*(){try{return yield s()}catch(_){return a(_)}})}function o(){return u(this,null,function*(){let s,_=document.createElement("canvas"),{gl:c,majorPerformanceCaveat:m}=A(_,"webgl");return c!==null?s={supported:!0,majorPerformanceCaveat:m,OffscreenCanvas:"OffscreenCanvas"in window&&S("webgl"),extensions:M(c,P()),parameters:O(c,w()),rendererInfo:b(c),shaderPrecision:R(c),colorSpace:L(c)}:s={supported:!1},_.remove(),s})}function E(){return u(this,null,function*(){let s,_=document.createElement("canvas"),{gl:c,majorPerformanceCaveat:m}=A(_,"webgl2");return c!==null?s={supported:!0,majorPerformanceCaveat:m,OffscreenCanvas:"OffscreenCanvas"in window&&S("webgl2"),extensions:M(c,I()),parameters:O(c,B()),rendererInfo:b(c),shaderPrecision:R(c),colorSpace:L(c)}:s={supported:!1},_.remove(),s})}function l(){return u(this,null,function*(){let s=V();if(s===null)return{supported:!1};let _=yield H(s);return _===null?{supported:!0,adapter:!1}:{supported:!0,adapter:!0,isFallbackAdapter:_.isFallbackAdapter,features:k(_,F),limits:j(_,D),adapterInfo:yield K(_)}})}function p(){return u(this,null,function*(){return{supported:"xr"in navigator}})}function q(){return u(this,null,function*(){let s=i(()=>window.location.origin,"error");return{locationOrigin:s,parentLocationOrigin:i(()=>window.parent!==null?window.parent.location.origin:null,"error"),documentReferer:i(()=>s.indexOf("web3dsurvey.com")>-1?document.referrer:null,"error"),hardwareConcurrency:navigator.hardwareConcurrency,deviceMemory:"deviceMemory"in navigator?navigator.deviceMemory:null,screenWidth:window.screen.width,screenHeight:window.screen.height,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth,devicePixelRatio:window.devicePixelRatio,webdriver:"webdriver"in navigator?navigator.webdriver:null,ImageBitmap:"ImageBitmap"in window,OffscreenCanvas:"OffscreenCanvas"in window,WebAssembly:"WebAssembly"in window,Worker:"Worker"in window}})}document.addEventListener("DOMContentLoaded",()=>u(this,null,function*(){let s=t();if(Math.random()>s.samplePercentage/100)return;yield g(s.delay);let _={webgl:yield n(o),webgl2:yield n(E),webgpu:yield n(l),webxr:yield n(p),device:yield n(q),version:22},c=`${s.host}/api/stats`;(yield fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok||console.error("Failed to send graphics statistics")}))})();})();
